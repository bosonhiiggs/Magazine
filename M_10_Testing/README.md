# Тестирование #

## Цель работы

- Написать автотесты для view-функций Django.
- Осуществить проверку view, статуса кода, контекста, шаблона.
- Применить фикстуры.

  

## Что сделано

1. Сделан тест для OrderDetailView. В классе теста:
- перед тестами происходит создание пользователя;
- пользователю выдаются необходимые права для просмотра заказа;
- перед тестом выполняется вход пользователя;
- перед тестом выполняется создание заказа, который будет проверен далее в тесте;
- после теста заказ удаляется;
- после тестов выполняется удаление пользователя.
2. Выполнена проверка, чтобы убедиться, что:
- в теле ответа есть адрес заказа;
- в теле ответа есть промокод;
- в контексте ответа тот же заказ, который был создан перед тестом (проверка по первичному ключу).
3. Создан OrdersExportView для экспорта заказов:
- доступ только для is_staff (проверка через user passes test);
- все заказы запрашиваются с подгрузкой пользователей и продуктов;
- в теле по каждому заказу должны быть поля с ID заказа, адрес, промокод, ID пользователя, список ID продуктов.
4. Тест для OrdersExportView сделан, в классе теста:
- использованы фикстуры, чтобы наполнять базу данных информацией по заказам;
- создан пользователь с необходимым уровнем доступа;
- после прохождения тестов пользователь удалён;
- перед тестами выполняется вход пользователя.
5. Выполнена проверка:
- статус кода-ответа — 200;
- тело совпадает с ожидаемым.
